(this["webpackJsonpproximity-stocksapp"]=this["webpackJsonpproximity-stocksapp"]||[]).push([[0],{19:function(t,e,c){},30:function(t,e,c){},31:function(t,e,c){},36:function(t,e,c){},38:function(t,e,c){},39:function(t,e,c){},41:function(t,e,c){},46:function(t,e,c){},47:function(t,e,c){},48:function(t,e,c){},49:function(t,e,c){"use strict";c.r(e);var n=c(1),r=c(2),s=c.n(r),a=c(20),i=c.n(a),o=(c(30),c(5)),l=(c(31),c(11));c(32),c(34);l.a.initializeApp({apiKey:"AIzaSyCmNuF-UVMfEKdZBact1xrfVEIG4GMIKCI",authDomain:"proximity-stocksapp.firebaseapp.com",databaseURL:"https://proximity-stocksapp.firebaseio.com",projectId:"proximity-stocksapp",storageBucket:"proximity-stocksapp.appspot.com",messagingSenderId:"149848156867",appId:"1:149848156867:web:060d43020c505bc54ed076",measurementId:"G-BDVRFKWMTE"});var j=l.a.auth(),b=(l.a.firestore(),new l.a.auth.GoogleAuthProvider);b.setCustomParameters({prompt:"select_account"});var u=function(){return j.signInWithPopup(b)},d=(l.a,c(24)),h=[],O=function(t,e){switch(e.type){case"newPrices":return e.value;default:console.log("some error occurred")}},p=function(t,e){return e},m=[],x=function(t,e){return e},f=[],k=function(t,e){return e},v={},g=function(t,e){var c=e.value.stock;switch(e.type){case"add":t[c]=e.value;break;default:console.log("some error occurred")}return t},S=Object(r.createContext)(),D=function(t){var e=t.children,c=Object(r.useReducer)(O,h),s=Object(r.useReducer)(p,""),a=Object(r.useReducer)(x,m),i=Object(r.useReducer)(k,f),o=Object(r.useReducer)(g,v);return Object(n.jsx)(S.Provider,{value:{stateAndDispatcher:c,stockNameAndDispatcher:s,stockPriceDataDispatcher:a,stockHistoryDispatcher:i,watchListStockDataDispatcher:o},children:e})},y=(c(36),function(){return Object(n.jsx)("div",{className:"sign-out-btn-container",children:Object(n.jsx)("button",{type:"button",className:"sign-out-btn",onClick:function(){return j.signOut()},children:"SignOut"})})}),C=(c(19),c(14)),w=c.n(C),N=function(t){var e=t.stockname;return Object(n.jsx)("td",{className:"stock-name",children:e.toUpperCase()})},T=function(t){var e=t.formattedTime;return Object(n.jsx)("td",{children:e})},P=function(t){var e=t.currentStockPrice,c=Object(r.useState)(!1),s=Object(o.a)(c,2),a=s[0],i=s[1];return Object(r.useEffect)((function(){i(!0),setTimeout((function(){i(!1)}),2e3)}),[e]),Object(n.jsxs)("td",{className:a?"flickClass ":"",children:["$",e," USD"]})},A=c.p+"static/media/up-chevron.5f5a3fcb.svg",V=c.p+"static/media/down-arrow.676521e0.svg",W=function(t){var e=t.percentCalc;return Object(n.jsx)("td",{children:e<0?Object(n.jsx)("img",{src:V,alt:"down arrow"}):Object(n.jsx)("img",{src:A,alt:"up arrow"})})},I=function(t){var e=t.percentCalc;return Object(n.jsx)("td",{className:e>0?"green-color":e<0?"red-color":"white-color",children:Object(n.jsxs)("b",{children:[e,"%"]})})},L=Object(r.createContext)({chartVisible:Boolean,setChartVisible:function(){}}),E=function(t){var e=t.priceData,c=t.nameOfStock,s=Object(r.useContext)(L),a=s.setChartVisible,i=s.chartVisible,l=Object(r.useContext)(S),j=l.stockNameAndDispatcher,b=l.stockPriceDataDispatcher,u=Object(o.a)(j,2),d=u[0],h=u[1],O=Object(o.a)(b,2),p=O[0],m=O[1];console.log(d,p);return Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:function(){return a(!i),h(c),void m(e)},children:"See Chart"})})},F=Object(r.createContext)({stockHistoryVisible:Boolean,setStockHistoryVisible:function(){}}),H=function(t){var e=t.priceData,c=Object(r.useContext)(F),s=c.setStockHistoryVisible,a=c.stockHistoryVisible,i=Object(r.useContext)(S).stockHistoryDispatcher,l=Object(o.a)(i,2),j=l[0],b=l[1];console.log(j);return Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:function(){return s(!a),void b(e)},children:"Stock History"})})},M=(c(38),function(t){var e=Object(r.useContext)(S).watchListStockDataDispatcher,c=Object(o.a)(e,2),s=c[0],a=c[1];console.log(s);var i=t.stock,l=t.percentCalc,j=t.formattedTime,b=t.stockDataWithTimeStampCache,u=t.stockTimeStampArray,d=t.stockDataWithTimeStamp,h=b[i][u[u.length-1]];return a({type:"add",value:{stock:i,percentCalc:l,formattedTime:j,currentStockPrice:h}}),Object(n.jsx)(r.Fragment,{children:Object(n.jsx)("div",{draggable:!0,onDragStart:function(t){return function(t,e){t.dataTransfer.setData("text/plain",e)}(t,i)},children:Object(n.jsxs)("tr",{id:i,className:"stock-table-row",children:[Object(n.jsx)("span",{className:"stock-StockName",children:Object(n.jsx)(N,{stockname:i})}),Object(n.jsx)("span",{className:"stock-StockLastUpadateTime",children:Object(n.jsx)(T,{formattedTime:j})}),Object(n.jsx)("span",{className:"stock-StockPrice",children:Object(n.jsx)(P,{currentStockPrice:h})}),Object(n.jsx)("span",{className:"stock-StockTrendArrow",children:Object(n.jsx)(W,{percentCalc:l})}),Object(n.jsx)("span",{className:"stock-StockTrendPercent",children:Object(n.jsx)(I,{percentCalc:l})}),Object(n.jsxs)("span",{className:"stock-buttons",children:[Object(n.jsx)(E,{priceData:d[i],nameOfStock:i}),Object(n.jsx)(H,{priceData:d[i],nameOfStock:i})]})]})})},i)}),U=(c(39),function(t){var e=t.filteredStockDataWithTimeStampArray,c=t.stockDataWithTimeStampCache,r=t.appState,s=t.stockDataWithTimeStamp;return Object(n.jsxs)("div",{className:"stock-wrapper",children:[Object(n.jsx)("table",{className:"label-table-row",children:Object(n.jsx)("tbody",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Stock Name"}),Object(n.jsx)("td",{children:"Last Update Time"}),Object(n.jsx)("td",{children:"Current Price"}),Object(n.jsx)("td",{children:"Percent Profit/Loss"}),Object(n.jsx)("td",{children:"Options"})]})})}),Object(n.jsx)("div",{className:"stocks-table",children:Object(n.jsx)("table",{children:Object(n.jsx)("tbody",{children:e.length?e.map((function(t){var e,a,i=Object.keys(c[t]),o=Math.abs(new Date(1e3*i[i.length-1])-new Date(1e3*i[i.length-2])),l=new Date(1e3*o),j=l.getHours(),b="0"+l.getMinutes(),u="0"+l.getSeconds(),d=j+":"+b.substr(-2)+":"+u.substr(-2),h=(e=c[t][i[i.length-1]],a=c[t][i[i.length-2]],{percentCalc:e&&a?((e-a)/a*100).toFixed(2):0}).percentCalc;return Object(n.jsx)(M,{appState:r,formattedTime:d,percentCalc:h,stock:t,stockDataWithTimeStampCache:c,stockTimeStampArray:i,stockDataWithTimeStamp:s})})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:"Please wait while stocks load."})},"random 1")})})})]})}),R={},B={},G=function(){var t=Object(r.useContext)(S).stateAndDispatcher,e=Object(o.a)(t,1)[0],c=Object(r.useState)(""),s=Object(o.a)(c,2),a=s[0],i=s[1],l=Object.fromEntries(e);for(var j in l){var b=[w.a.unix(Math.floor(new Date/1e3))._i,Number(l[j].toFixed(2))];j in R?(R[j].push(b),R[j].length>=100&&R[j].splice(0,50)):R[j]=[b]}for(var u in R)B[u]=Object.fromEntries(R[u]);var d=Object.keys(B).filter((function(t){return t.toLowerCase().includes(a.toLowerCase())}));return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"stocks-wrapper",children:[Object(n.jsx)("h5",{children:"Stocks"}),Object(n.jsx)("div",{className:"search-container",children:Object(n.jsx)("input",{placeholder:"Search stocks here",onChange:function(t){i(t.target.value)}})}),Object(n.jsx)(U,{filteredStockDataWithTimeStampArray:d,stockDataWithTimeStampCache:B,appState:e,stockDataWithTimeStamp:R})]})})},z=c(16),K=c(21),Y=c.n(K),J=function(t){var e,c=t.priceData,r=t.name,s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),a=(e={yAxis:[{offset:20,labels:{formatter:function(){return s.format(this.value)},x:-15,style:{color:"#000",position:"absolute"},align:"left"}}],tooltip:{shared:!0,formatter:function(){return s.format(this.y,0)+"</b><br/>"+w()(this.x).format("MMMM Do YYYY, h:mm")}},plotOptions:{series:{showInNavigator:!0,gapSize:6}},rangeSelector:{selected:1},title:{text:"".concat(r.toUpperCase()," Changes")},chart:{height:600},credits:{enabled:!1},legend:{enabled:!0},xAxis:{type:"date"}},Object(z.a)(e,"rangeSelector",{buttons:[{type:"day",count:1,text:"1d"},{type:"day",count:7,text:"7d"},{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"all",text:"All"}],selected:4}),Object(z.a)(e,"series",[{name:"Price",type:"spline",data:c,tooltip:{valueDecimals:2}}]),e);return Object(n.jsx)("div",{className:"chart-container",children:Object(n.jsx)(Y.a,{config:a})})},$=function(){var t=Object(r.useContext)(S),e=t.stockNameAndDispatcher,c=t.stockPriceDataDispatcher,s=Object(o.a)(e,1)[0],a=Object(o.a)(c,1)[0];return Object(n.jsx)("div",{className:"chartview-main",children:Object(n.jsx)(J,{name:s,priceData:a})})},Z=(c(41),function(){var t=Object(r.useContext)(S).stockHistoryDispatcher,e=Object(o.a)(t,1)[0],c=Object.fromEntries(e);return Object(n.jsx)("div",{className:"stocks-history-wrapper",children:Object(n.jsx)("table",{className:"history-table",children:Object(n.jsx)("tbody",{children:Object.keys(c).map((function(t){var e=new Date(1e3*Number(t)),r=e.getHours(),s="0"+e.getMinutes(),a="0"+e.getSeconds(),i=r+":"+s.substr(-2)+":"+a.substr(-2),o="$".concat(c[t]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Time"}),Object(n.jsx)("td",{children:"Price"})]}),Object(n.jsxs)("tr",{className:"history-table-row",children:[Object(n.jsx)("td",{className:"history-table-row-element",children:i}),Object(n.jsx)("td",{className:"history-table-row-element",children:o})]})]})}))})})})}),_=c(22),q=c(23),Q=(c(46),{}),X=function(){var t=Object(r.useState)("watch-stocks-container"),e=Object(o.a)(t,2),c=e[0],s=e[1],a=Object(r.useContext)(S).watchListStockDataDispatcher,i=Object(o.a)(a,1)[0];return Object(n.jsxs)("div",{className:"watchlist-container",onDragEnter:function(){s("dropzone-hovered")},onDragLeave:function(){return s("watch-stocks-container")},children:[Object(n.jsx)("div",{children:"Watch List"}),Object(n.jsxs)("div",{className:c,onDragOver:function(t){return function(t){t.preventDefault()}(t)},onDrop:function(t){return function(t){var e=t.dataTransfer.getData("text");Q[e]=1,s("watch-stocks-container")}(t)},children:["DROPZONE",Object.keys(Q).map((function(t){var e=i[t],c=e.formattedTime,r=e.percentCalc,s=e.currentStockPrice;return Object(n.jsx)("div",{className:"stock-row",children:Object(n.jsx)("table",{children:Object(n.jsx)("tbody",{children:Object(n.jsxs)("tr",{className:"stock-table-row",children:[Object(n.jsx)("td",{children:t.toUpperCase()}),Object(n.jsx)("td",{children:c}),Object(n.jsxs)("td",{children:["$",s,"USD"]}),Object(n.jsxs)("td",{className:r>0?"green-color":r<0?"red-color":"white-color",children:[r,"%"]}),Object(n.jsx)("td",{children:Object(n.jsx)(_.a,{className:"arrow",onClick:function(){return function(t){delete Q[t]}(t)},icon:q.a})})]})})})})}))]})]})},tt=(c(47),function(){var t=Object(r.useRef)(null),e=Object(r.useContext)(S).stateAndDispatcher,c=Object(o.a)(e,2),s=c[0],a=c[1],i=(Object(d.a)(s),Object(r.useState)(!1)),l=Object(o.a)(i,2),j=l[0],b=l[1],u=Object(r.useState)(!1),h=Object(o.a)(u,2),O=h[0],p=h[1];return Object(r.useEffect)((function(){return t.current=new WebSocket("ws://stocks.mnet.website"),t.current.onopen=function(){console.log("connection opened")},t.current.onmessage=function(t){var e=JSON.parse(t.data);a({type:"newPrices",value:e})},t.current.onclose=function(){t.current.close()},function(){return t.current.close()}}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)(y,{}),Object(n.jsx)("div",{className:"main",children:Object(n.jsxs)(F.Provider,{value:{stockHistoryVisible:O,setStockHistoryVisible:p},children:[Object(n.jsxs)("div",{className:"watchlist-history-container",children:[Object(n.jsx)(X,{}),O&&Object(n.jsx)(Z,{})]}),Object(n.jsxs)(L.Provider,{value:{chartVisible:j,setChartVisible:b},children:[Object(n.jsx)("div",{className:"stockTable-container",children:Object(n.jsx)(G,{})}),Object(n.jsx)("div",{className:"chartview-container",children:j&&Object(n.jsx)($,{})})]})]})})]})}),et=(c(48),function(){return Object(n.jsx)("div",{className:"sign-in-btn-container",children:Object(n.jsx)("button",{type:"button",className:"sign-in-btn",onClick:u,children:"Sign In With Google"})})});var ct=function(){var t=Object(r.useState)(""),e=Object(o.a)(t,2),c=e[0],s=e[1];return Object(r.useEffect)((function(){j.onAuthStateChanged((function(t){s(t)}))}),[c]),Object(n.jsx)("div",{className:"App",children:c?Object(n.jsx)(D,{children:Object(n.jsx)(tt,{})}):Object(n.jsx)(et,{})})},nt=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,50)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,s=e.getLCP,a=e.getTTFB;c(t),n(t),r(t),s(t),a(t)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(ct,{})}),document.getElementById("root")),nt()}},[[49,1,2]]]);
//# sourceMappingURL=main.8ce2c29d.chunk.js.map